\documentclass{minimal}
\input{regression-test}

\RequirePackage{tikz}

\newsavebox\testbox

\begin{document}

\START

\TEST{Using lrbox}{}

\begin{lrbox}\testbox
  \begin{tikzpicture}
    \matrix
      {
        \node {a}; \fill[blue] (0,0) circle (2pt); &
        \node {X}; \fill[blue] (0,0) circle (2pt); &
        \node {g}; \fill[blue] (0,0) circle (2pt); \\
      };
  \end{tikzpicture}
\end{lrbox}

\begingroup
  \showboxbreadth\maxdimen
  \showboxdepth\maxdimen
  \showbox\testbox
\endgroup

\showoutput

% Just using a normal doc

\TEST{Using \showoutput}{}

\begin{tikzpicture}
  \matrix
    {
      \node {a}; \fill[blue] (0,0) circle (2pt); &
      \node {X}; \fill[blue] (0,0) circle (2pt); &
      \node {g}; \fill[blue] (0,0) circle (2pt); \\
    };
\end{tikzpicture}

\newpage

\END
